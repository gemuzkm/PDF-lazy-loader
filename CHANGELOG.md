# Changelog

## Version 1.0.6 - Improved PDF Detection

### Улучшения

1. **Улучшенное обнаружение PDF iframes**
   - Теперь проверяются все iframes на странице, а не только с определенными атрибутами
   - Добавлена проверка по классам и ID (pdf-embedder, pdfembed, pdf-viewer и т.д.)
   - Проверка родительских контейнеров на наличие PDF-индикаторов

2. **Поддержка динамически созданных iframes**
   - Добавлен MutationObserver для отслеживания iframes, созданных после загрузки страницы
   - Автоматическая обработка новых iframes при их появлении

3. **Улучшенное извлечение PDF URL**
   - Поддержка viewer.html и pdfjs форматов
   - Извлечение URL из параметров запроса
   - Проверка data-атрибутов

4. **Предотвращение загрузки PDF**
   - Удаление src атрибута сразу при обнаружении iframe
   - Множественные способы скрытия iframe для предотвращения загрузки

5. **Улучшенное логирование**
   - Более детальные логи для отладки
   - Отслеживание обработанных iframes через WeakSet

### Исправления

- Исправлена проблема с необнаружением PDF iframes от PDFEmbedder
- Исправлена проблема с динамически созданными iframes
- Улучшена совместимость с различными плагинами для встраивания PDF

### Технические детали

- Используется WeakSet для отслеживания обработанных iframes
- MutationObserver настроен на отслеживание всего body с subtree
- Множественные проверки для определения PDF iframes
- Задержки обработки для захвата поздних iframes (500ms, 1500ms)

